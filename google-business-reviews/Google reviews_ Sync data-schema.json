{
    "tags": [
        {
            "name": "google"
        }
    ],
    "editor": true,
    "type": "service",
    "payload": "{\"id\":\"demo@0.1.0\",\"nodes\":{\"17\":{\"id\":17,\"data\":{\"extensions\":{\"tag\":\"17-start-custom-tag\"}},\"inputs\":{},\"outputs\":{\"out\":{\"connections\":[{\"node\":50,\"input\":\"in\",\"data\":{}}]}},\"position\":[-483.9401752818718,-52.48898821382406],\"name\":\"start\"},\"34\":{\"id\":34,\"data\":{\"condition\":\"+${i} < +${responseData.reviews.#}\",\"maxSteps\":\"${totalReviewCount}\",\"extensions\":{\"break\":false,\"tag\":\"34-while-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":55,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"do\":{\"connections\":[{\"node\":40,\"input\":\"in\",\"data\":{}}]},\"out\":{\"connections\":[{\"node\":51,\"input\":\"in\",\"data\":{}}]}},\"position\":[652.273481999433,91.17078713519776],\"name\":\"while\"},\"38\":{\"id\":38,\"data\":{\"data\":\"return +${i} + 1\",\"setVar\":\"i\",\"extensions\":{\"break\":false,\"tag\":\"38-js-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":49,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[1910.4888283690952,148.5409180730055],\"name\":\"js\"},\"39\":{\"id\":39,\"data\":{\"expression\":\"The End: ${newReviewTime}\",\"extensions\":{\"break\":true,\"tag\":\"39-log-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":68,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[577.8898115004104,594.010402342402],\"name\":\"log\"},\"40\":{\"id\":40,\"data\":{\"data\":\"var data = JSON.parse(${responseData});\\nreturn JSON.stringify(data.reviews[${i}])\",\"setVar\":\"theReview\",\"extensions\":{\"break\":false,\"tag\":\"40-js-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":34,\"output\":\"do\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":71,\"input\":\"in\",\"data\":{}}]}},\"position\":[827.8196838193682,132.6031506960259],\"name\":\"js\"},\"44\":{\"id\":44,\"data\":{\"code\":\"  {\\n        \\\"httpRequest\\\": {\\n            \\\"url\\\": \\\"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews?pageSize=${pageSize}\\\",\\n            \\\"method\\\": \\\"GET\\\",\\n            \\\"timeout\\\": 5000,\\n            \\\"insecureSkipVerify1\\\": false,\\n            \\\"parser\\\": \\\"application/json\\\",\\n            \\\"responseCode\\\": \\\"http_response_code\\\",\\n            \\\"path\\\": {\\n               \\\"pageSize\\\": \\\"${pageSize}\\\",\\n                \\\"google_account_id\\\": \\\"${google_account_id}\\\",\\n                \\\"google_location_id\\\": \\\"${google_location_id}\\\"\\n            },\\n            \\\"headers\\\": {\\n                \\\"Authorization\\\": \\\"${googleToken}\\\"\\n            },\\n            \\\"exportVariables\\\": {\\n                \\\"totalReviewCount\\\": \\\"totalReviewCount\\\",\\n                \\\"averageRating\\\": \\\"averageRating\\\",\\n                \\\"nextPageToken\\\": \\\"nextPageToken\\\",\\n                \\\"responseData\\\": \\\"@this\\\"\\n            }\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"44-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":62,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":73,\"input\":\"in\",\"data\":{}}]}},\"position\":[-115.45637859683067,97.67798161348202],\"name\":\"customCode\"},\"49\":{\"id\":49,\"data\":{\"communication\":{\"destination\":\"${theReview.reviewId}\",\"type\":{\"id\":\"118\",\"name\":\"Google ID\"}},\"holdSec\":1,\"name\":\"${theReview.reviewer.displayName}\",\"agent\":{},\"queue\":{},\"variables\":[{\"key\":\"starRating\",\"value\":\"${theReview.starRating}\"},{\"key\":\"Comment\",\"value\":\"${theReview.comment}\"},{\"key\":\"profilePhotoUrl\",\"value\":\"${theReview.reviewer.profilePhotoUrl}\"}],\"extensions\":{\"break\":false,\"tag\":\"49-callbackQueue-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":70,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":38,\"input\":\"in\",\"data\":{}}]}},\"position\":[1697.6955014442956,148.41152600177574],\"name\":\"callbackQueue\"},\"50\":{\"id\":50,\"data\":{\"set\":[{\"key\":\"pageSize\",\"value\":\"10\"},{\"key\":\"google_account_id\",\"value\":\"CHANGE_ME\"},{\"key\":\"google_location_id\",\"value\":\"CHANGE_ME\"}],\"extensions\":{\"break\":false,\"tag\":\"50-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":17,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":62,\"input\":\"in\",\"data\":{}}]}},\"position\":[-313.4880556254737,-52.216882039728226],\"name\":\"set\"},\"51\":{\"id\":51,\"data\":{\"expression\":\"${nextPageToken}\",\"extensions\":{\"break\":false,\"tag\":\"51-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":34,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":52,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[]}},\"position\":[790.9794156871089,404.74730659176055],\"name\":\"if\"},\"52\":{\"id\":52,\"data\":{\"code\":\"  {\\n        \\\"httpRequest\\\": {\\n            \\\"url\\\": \\\"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews?pageToken=${nextPageToken}\\\",\\n            \\\"method\\\": \\\"GET\\\",\\n            \\\"timeout\\\": 5000,\\n            \\\"insecureSkipVerify1\\\": false,\\n            \\\"parser\\\": \\\"application/json\\\",\\n            \\\"responseCode\\\": \\\"http_response_code\\\",\\n            \\\"path\\\": {\\n               \\\"nextPageToken\\\": \\\"${nextPageToken}\\\",\\n                \\\"google_account_id\\\": \\\"${google_account_id}\\\",\\n                \\\"google_location_id\\\": \\\"${google_location_id}\\\"\\n            },\\n            \\\"headers\\\": {\\n                \\\"Authorization\\\": \\\"${googleToken}\\\"\\n            },\\n            \\\"exportVariables\\\": {\\n                \\\"totalReviewCount\\\": \\\"totalReviewCount\\\",\\n                \\\"averageRating\\\": \\\"averageRating\\\",\\n                \\\"nextPageToken\\\": \\\"nextPageToken\\\",\\n                \\\"responseData\\\": \\\"@this\\\"\\n            }\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"52-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":51,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":53,\"input\":\"in\",\"data\":{}}]}},\"position\":[956.0162883126826,445.2769753809381],\"name\":\"customCode\"},\"53\":{\"id\":53,\"data\":{\"goto\":\"55-set-custom-tag\",\"extensions\":{\"break\":false,\"tag\":\"53-goto-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":52,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"goto\":{\"connections\":[{\"node\":55,\"input\":\"in\",\"data\":{}}]}},\"position\":[1152.9006712081773,487.70161324563276],\"name\":\"goto\"},\"55\":{\"id\":55,\"data\":{\"set\":[{\"key\":\"i\",\"value\":\"0\"}],\"extensions\":{\"break\":false,\"tag\":\"55-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":53,\"output\":\"goto\",\"data\":{}},{\"node\":56,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":34,\"input\":\"in\",\"data\":{}}]}},\"position\":[495.0768113968726,297.15376655697384],\"name\":\"set\"},\"56\":{\"id\":56,\"data\":{\"expression\":\"+${totalReviewCount}>0\",\"extensions\":{\"break\":false,\"tag\":\"56-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":73,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":55,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[{\"node\":68,\"input\":\"in\",\"data\":{}}]}},\"position\":[273.07349948655144,256.14558979633733],\"name\":\"if\"},\"58\":{\"id\":58,\"data\":{\"expression\":\"+${lastReviewTime} < +${theReviewTime}\",\"extensions\":{\"break\":false,\"tag\":\"58-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":71,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":60,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[{\"node\":66,\"input\":\"in\",\"data\":{}}]},\"out\":{\"connections\":[]}},\"position\":[1144.1057201770407,128.95025964761567],\"name\":\"if\"},\"59\":{\"id\":59,\"data\":{\"expression\":\"BREAK: ${lastReviewTime}\",\"extensions\":{\"break\":true,\"tag\":\"59-log-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":65,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[1691.0548804134198,321.5904591412736],\"name\":\"log\"},\"60\":{\"id\":60,\"data\":{\"expression\":\"!${newReviewTime}\",\"extensions\":{\"break\":false,\"tag\":\"60-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":58,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":61,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[{\"node\":70,\"input\":\"in\",\"data\":{}}]}},\"position\":[1315.7328926525943,-2.3043704478679956],\"name\":\"if\"},\"61\":{\"id\":61,\"data\":{\"set\":[{\"key\":\"newReviewTime\",\"value\":\"${theReviewTime}\"}],\"extensions\":{\"break\":false,\"tag\":\"61-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":60,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[1489.462522081015,7.421980934679567],\"name\":\"set\"},\"62\":{\"id\":62,\"data\":{\"code\":\" {\\n        \\\"cache\\\": {\\n            \\\"action\\\": \\\"get\\\",\\n            \\\"get\\\": {\\n                \\\"googleToken\\\": \\\"google_review_access_token\\\",\\n                 \\\"lastReviewTime\\\": \\\"google_review_update_time\\\"\\n            },\\n            \\\"type\\\": \\\"redis\\\"\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"62-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":44,\"input\":\"in\",\"data\":{}}]}},\"position\":[-305.66198030096086,97.36345730300464],\"name\":\"customCode\"},\"65\":{\"id\":65,\"data\":{\"code\":\" {\\n        \\\"cache\\\": {\\n            \\\"action\\\": \\\"set\\\",\\n            \\\"set\\\": {\\n                \\\"data\\\": {\\n                    \\\"google_review_update_time\\\": \\\"${lastReviewTime}\\\"\\n                },\\n                \\\"ttl\\\": \\\"6000\\\"\\n            },\\n            \\\"type\\\": \\\"redis\\\"\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"65-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":66,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":59,\"input\":\"in\",\"data\":{}}]}},\"position\":[1490.8611920670012,321.8552534759201],\"name\":\"customCode\"},\"66\":{\"id\":66,\"data\":{\"expression\":\"!${newReviewTime}\",\"extensions\":{\"break\":false,\"tag\":\"66-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":58,\"output\":\"else\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":65,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[{\"node\":69,\"input\":\"in\",\"data\":{}}]}},\"position\":[1322.7986765735027,282.2971960670825],\"name\":\"if\"},\"68\":{\"id\":68,\"data\":{\"code\":\" {\\n        \\\"cache\\\": {\\n            \\\"action\\\": \\\"set\\\",\\n            \\\"set\\\": {\\n                \\\"data\\\": {\\n                    \\\"google_review_update_time\\\": \\\"${newReviewTime}\\\"\\n                },\\n                \\\"ttl\\\": \\\"6000\\\"\\n            },\\n            \\\"type\\\": \\\"redis\\\"\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"68-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":56,\"output\":\"out\",\"data\":{}},{\"node\":69,\"output\":\"goto\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":39,\"input\":\"in\",\"data\":{}}]}},\"position\":[385.9411843394471,594.4633840118679],\"name\":\"customCode\"},\"69\":{\"id\":69,\"data\":{\"goto\":\"68-customCode-custom-tag\",\"extensions\":{\"break\":false,\"tag\":\"69-goto-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":66,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"goto\":{\"connections\":[{\"node\":68,\"input\":\"in\",\"data\":{}}]}},\"position\":[1437.4441206203694,564.0836645247937],\"name\":\"goto\"},\"70\":{\"id\":70,\"data\":{\"member\":{\"bucket\":{},\"completed\":false,\"destination\":\"${theReview.reviewId}\",\"name\":\"\",\"queues\":[],\"today\":false},\"patch\":{\"bucket\":{\"selected\":false,\"value\":{}},\"name\":{\"selected\":false,\"value\":\"\"},\"priority\":{\"selected\":false,\"value\":\"\"},\"readyAt\":{\"selected\":false,\"value\":\"\"},\"stopCause\":{\"selected\":true,\"value\":\"cancel\"},\"variables\":{\"selected\":false,\"value\":[{\"key\":\"\",\"value\":\"\"}]}},\"extensions\":{\"break\":false,\"tag\":\"70-patchMembers-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":60,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":49,\"input\":\"in\",\"data\":{}}]}},\"position\":[1488.1413645134435,149.47531325242284],\"name\":\"patchMembers\"},\"71\":{\"id\":71,\"data\":{\"data\":\"var data = JSON.parse(${responseData});\\nreturn (new Date(data.reviews[${i}].updateTime)).getTime()\",\"setVar\":\"theReviewTime\",\"extensions\":{\"break\":false,\"tag\":\"71-js-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":40,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":58,\"input\":\"in\",\"data\":{}}]}},\"position\":[983.4376482129135,133.5325836137472],\"name\":\"js\"},\"73\":{\"id\":73,\"data\":{\"expression\":\"${lastReviewTime} == \\\"NaN\\\"\",\"extensions\":{\"break\":false,\"tag\":\"73-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":44,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":74,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[{\"node\":56,\"input\":\"in\",\"data\":{}}]}},\"position\":[86.738525390625,137.7209701538086],\"name\":\"if\"},\"74\":{\"id\":74,\"data\":{\"set\":[{\"key\":\"lastReviewTime\",\"value\":\"0\"}],\"extensions\":{\"break\":false,\"tag\":\"74-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":73,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[247.2579083020174,105.0765681382016],\"name\":\"set\"}}}",
    "schema": "[\n    {\n        \"break\": false,\n        \"set\": {\n            \"google_account_id\": \"CHANGE_ME\",\n            \"google_location_id\": \"CHANGE_ME\",\n            \"pageSize\": \"10\"\n        },\n        \"tag\": \"50-set-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"cache\": {\n            \"action\": \"get\",\n            \"get\": {\n                \"googleToken\": \"google_review_access_token\",\n                \"lastReviewTime\": \"google_review_update_time\"\n            },\n            \"type\": \"redis\"\n        },\n        \"tag\": \"62-customCode-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"httpRequest\": {\n            \"exportVariables\": {\n                \"averageRating\": \"averageRating\",\n                \"nextPageToken\": \"nextPageToken\",\n                \"responseData\": \"@this\",\n                \"totalReviewCount\": \"totalReviewCount\"\n            },\n            \"headers\": {\n                \"Authorization\": \"${googleToken}\"\n            },\n            \"insecureSkipVerify1\": false,\n            \"method\": \"GET\",\n            \"parser\": \"application/json\",\n            \"path\": {\n                \"google_account_id\": \"${google_account_id}\",\n                \"google_location_id\": \"${google_location_id}\",\n                \"pageSize\": \"${pageSize}\"\n            },\n            \"responseCode\": \"http_response_code\",\n            \"timeout\": 5000,\n            \"url\": \"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews?pageSize=${pageSize}\"\n        },\n        \"tag\": \"44-customCode-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"if\": {\n            \"expression\": \"${lastReviewTime} == \\\"NaN\\\"\",\n            \"then\": [\n                {\n                    \"break\": false,\n                    \"set\": {\n                        \"lastReviewTime\": \"0\"\n                    },\n                    \"tag\": \"74-set-custom-tag\"\n                }\n            ]\n        },\n        \"tag\": \"73-if-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"if\": {\n            \"expression\": \"+${totalReviewCount}>0\",\n            \"then\": [\n                {\n                    \"break\": false,\n                    \"set\": {\n                        \"i\": \"0\"\n                    },\n                    \"tag\": \"55-set-custom-tag\"\n                },\n                {\n                    \"break\": false,\n                    \"tag\": \"34-while-custom-tag\",\n                    \"while\": {\n                        \"condition\": \"+${i} < +${responseData.reviews.#}\",\n                        \"do\": [\n                            {\n                                \"break\": false,\n                                \"js\": {\n                                    \"data\": \"var data = JSON.parse(${responseData});\\nreturn JSON.stringify(data.reviews[${i}])\",\n                                    \"setVar\": \"theReview\"\n                                },\n                                \"tag\": \"40-js-custom-tag\"\n                            },\n                            {\n                                \"break\": false,\n                                \"js\": {\n                                    \"data\": \"var data = JSON.parse(${responseData});\\nreturn (new Date(data.reviews[${i}].updateTime)).getTime()\",\n                                    \"setVar\": \"theReviewTime\"\n                                },\n                                \"tag\": \"71-js-custom-tag\"\n                            },\n                            {\n                                \"break\": false,\n                                \"if\": {\n                                    \"else\": [\n                                        {\n                                            \"break\": false,\n                                            \"if\": {\n                                                \"expression\": \"!${newReviewTime}\",\n                                                \"then\": [\n                                                    {\n                                                        \"break\": false,\n                                                        \"cache\": {\n                                                            \"action\": \"set\",\n                                                            \"set\": {\n                                                                \"data\": {\n                                                                    \"google_review_update_time\": \"${lastReviewTime}\"\n                                                                },\n                                                                \"ttl\": \"6000\"\n                                                            },\n                                                            \"type\": \"redis\"\n                                                        },\n                                                        \"tag\": \"65-customCode-custom-tag\"\n                                                    },\n                                                    {\n                                                        \"break\": true,\n                                                        \"log\": \"BREAK: ${lastReviewTime}\",\n                                                        \"tag\": \"59-log-custom-tag\"\n                                                    }\n                                                ]\n                                            },\n                                            \"tag\": \"66-if-custom-tag\"\n                                        },\n                                        {\n                                            \"break\": false,\n                                            \"goto\": \"68-customCode-custom-tag\",\n                                            \"tag\": \"69-goto-custom-tag\"\n                                        }\n                                    ],\n                                    \"expression\": \"+${lastReviewTime} < +${theReviewTime}\",\n                                    \"then\": [\n                                        {\n                                            \"break\": false,\n                                            \"if\": {\n                                                \"expression\": \"!${newReviewTime}\",\n                                                \"then\": [\n                                                    {\n                                                        \"break\": false,\n                                                        \"set\": {\n                                                            \"newReviewTime\": \"${theReviewTime}\"\n                                                        },\n                                                        \"tag\": \"61-set-custom-tag\"\n                                                    }\n                                                ]\n                                            },\n                                            \"tag\": \"60-if-custom-tag\"\n                                        },\n                                        {\n                                            \"break\": false,\n                                            \"patchMembers\": {\n                                                \"member\": {\n                                                    \"bucket\": {},\n                                                    \"completed\": false,\n                                                    \"destination\": \"${theReview.reviewId}\",\n                                                    \"name\": \"\",\n                                                    \"queues\": [],\n                                                    \"today\": false\n                                                },\n                                                \"patch\": {\n                                                    \"stopCause\": \"cancel\"\n                                                }\n                                            },\n                                            \"tag\": \"70-patchMembers-custom-tag\"\n                                        },\n                                        {\n                                            \"break\": false,\n                                            \"callbackQueue\": {\n                                                \"agent\": {},\n                                                \"communication\": {\n                                                    \"destination\": \"${theReview.reviewId}\",\n                                                    \"type\": {\n                                                        \"id\": \"118\",\n                                                        \"name\": \"Google ID\"\n                                                    }\n                                                },\n                                                \"holdSec\": 1,\n                                                \"name\": \"${theReview.reviewer.displayName}\",\n                                                \"queue\": {},\n                                                \"variables\": {\n                                                    \"Comment\": \"${theReview.comment}\",\n                                                    \"profilePhotoUrl\": \"${theReview.reviewer.profilePhotoUrl}\",\n                                                    \"starRating\": \"${theReview.starRating}\"\n                                                }\n                                            },\n                                            \"tag\": \"49-callbackQueue-custom-tag\"\n                                        },\n                                        {\n                                            \"break\": false,\n                                            \"js\": {\n                                                \"data\": \"return +${i} + 1\",\n                                                \"setVar\": \"i\"\n                                            },\n                                            \"tag\": \"38-js-custom-tag\"\n                                        }\n                                    ]\n                                },\n                                \"tag\": \"58-if-custom-tag\"\n                            }\n                        ],\n                        \"maxSteps\": \"${totalReviewCount}\"\n                    }\n                },\n                {\n                    \"break\": false,\n                    \"if\": {\n                        \"expression\": \"${nextPageToken}\",\n                        \"then\": [\n                            {\n                                \"break\": false,\n                                \"httpRequest\": {\n                                    \"exportVariables\": {\n                                        \"averageRating\": \"averageRating\",\n                                        \"nextPageToken\": \"nextPageToken\",\n                                        \"responseData\": \"@this\",\n                                        \"totalReviewCount\": \"totalReviewCount\"\n                                    },\n                                    \"headers\": {\n                                        \"Authorization\": \"${googleToken}\"\n                                    },\n                                    \"insecureSkipVerify1\": false,\n                                    \"method\": \"GET\",\n                                    \"parser\": \"application/json\",\n                                    \"path\": {\n                                        \"google_account_id\": \"${google_account_id}\",\n                                        \"google_location_id\": \"${google_location_id}\",\n                                        \"nextPageToken\": \"${nextPageToken}\"\n                                    },\n                                    \"responseCode\": \"http_response_code\",\n                                    \"timeout\": 5000,\n                                    \"url\": \"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews?pageToken=${nextPageToken}\"\n                                },\n                                \"tag\": \"52-customCode-custom-tag\"\n                            },\n                            {\n                                \"break\": false,\n                                \"goto\": \"55-set-custom-tag\",\n                                \"tag\": \"53-goto-custom-tag\"\n                            }\n                        ]\n                    },\n                    \"tag\": \"51-if-custom-tag\"\n                }\n            ]\n        },\n        \"tag\": \"56-if-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"cache\": {\n            \"action\": \"set\",\n            \"set\": {\n                \"data\": {\n                    \"google_review_update_time\": \"${newReviewTime}\"\n                },\n                \"ttl\": \"6000\"\n            },\n            \"type\": \"redis\"\n        },\n        \"tag\": \"68-customCode-custom-tag\"\n    },\n    {\n        \"break\": true,\n        \"log\": \"The End: ${newReviewTime}\",\n        \"tag\": \"39-log-custom-tag\"\n    }\n]",
    "id": "1442",
    "createdAt": "1698831480072",
    "createdBy": {
        "id": "130",
        "name": "Євген Волошин"
    },
    "updatedAt": "1698832247269",
    "updatedBy": {
        "id": "130",
        "name": "Євген Волошин"
    },
    "name": "Google reviews: Sync data"
}