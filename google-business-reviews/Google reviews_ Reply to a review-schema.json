{
    "tags": [
        {
            "name": "google"
        }
    ],
    "editor": true,
    "type": "processing",
    "payload": "{\"id\":\"demo@0.1.0\",\"nodes\":{\"17\":{\"id\":17,\"data\":{\"extensions\":{\"tag\":\"17-start-custom-tag\"}},\"inputs\":{},\"outputs\":{\"out\":{\"connections\":[{\"node\":56,\"input\":\"in\",\"data\":{}}]}},\"position\":[-668.7527641405106,-613.5783463944763],\"name\":\"start\"},\"39\":{\"id\":39,\"data\":{\"id\":\"Reply\",\"view\":{\"label\":\"\",\"hint\":\"\",\"initialValue\":\"${reviewReply}\",\"output\":{\"locale\":\"apps.formRichTextEditor.params.output.text\",\"value\":\"text\"}},\"extensions\":{\"break\":false,\"tag\":\"39-formRichTextEditor-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":44,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":40,\"input\":\"in\",\"data\":{}}]}},\"position\":[183.67224251342972,125.72898501392648],\"name\":\"formRichTextEditor\"},\"40\":{\"id\":40,\"data\":{\"id\":\"ReplyForm\",\"title\":\"Google Review\",\"body\":[{\"name\":\"Reviewer\"},{\"name\":\"Reply\"}],\"actions\":[{\"id\":\"id\",\"view\":{\"color\":\"primary\",\"text\":\"Send\"}}],\"extensions\":{\"break\":false,\"tag\":\"40-generateForm-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":39,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":41,\"input\":\"in\",\"data\":{}}]}},\"position\":[448.3648146559851,131.37685970019788],\"name\":\"generateForm\"},\"41\":{\"id\":41,\"data\":{\"expression\":\"${Reply}\",\"extensions\":{\"break\":false,\"tag\":\"41-if-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":40,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"then\":{\"connections\":[{\"node\":42,\"input\":\"in\",\"data\":{}}]},\"else\":{\"connections\":[]},\"out\":{\"connections\":[{\"node\":43,\"input\":\"in\",\"data\":{}}]}},\"position\":[672.3046875,5.23828125],\"name\":\"if\"},\"42\":{\"id\":42,\"data\":{\"code\":\"  {\\n        \\\"httpRequest\\\": {\\n            \\\"url\\\": \\\"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews/${review_id}\\\",\\n            \\\"method\\\": \\\"PUT\\\",\\n            \\\"timeout\\\": 5000,\\n            \\\"insecureSkipVerify1\\\": false,\\n            \\\"parser\\\": \\\"application/json\\\",\\n            \\\"responseCode\\\": \\\"http_response_code\\\",\\n            \\\"path\\\": {\\n                \\\"google_account_id\\\": \\\"${google_account_id}\\\",\\n                \\\"google_location_id\\\": \\\"${google_location_id}\\\",\\n                \\\"review_id\\\": \\\"${destination}\\\"             \\n            },\\n            \\\"headers\\\": {\\n                \\\"Authorization\\\": \\\"${googleToken}\\\"\\n            },\\n            \\\"data\\\": {\\n                \\\"comment\\\": \\\"${Reply}\\\"\\n            }\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"42-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":41,\"output\":\"then\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[857.871126772637,33.312104540383324],\"name\":\"customCode\"},\"43\":{\"id\":43,\"data\":{\"status\":{\"name\":\"success\"},\"stickyDisplay\":false,\"isCommunications\":false,\"addCommunications\":[{\"priority\":0,\"destination\":\"\",\"type\":{\"id\":\"\"}}],\"readyAt\":\"\",\"description\":\"\",\"extensions\":{\"break\":true,\"tag\":\"43-attemptResult-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":41,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[859.190085685862,198.51758002413342],\"name\":\"attemptResult\"},\"44\":{\"id\":44,\"data\":{\"id\":\"Reviewer\",\"view\":{\"label\":\"\",\"hint\":\"\",\"initialValue\":\"| Photo | Name | Rating |\\n| -------- | ------- | ------- | \\n| ![${member_name}](${profilePhotoUrlNew}) | ${member_name}  | ${starRatingNew}  | \\n\\n\",\"color\":\"secondary\",\"collapsible\":false,\"enableCopying\":false},\"extensions\":{\"break\":false,\"tag\":\"44-formText-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":39,\"input\":\"in\",\"data\":{}}]}},\"position\":[-2.347653061125399,124.78959826001785],\"name\":\"formText\"},\"45\":{\"id\":45,\"data\":{\"code\":\" {\\n        \\\"cache\\\": {\\n            \\\"action\\\": \\\"get\\\",\\n            \\\"get\\\": {\\n                \\\"googleToken\\\": \\\"google_review_access_token\\\"\\n            },\\n            \\\"type\\\": \\\"redis\\\"\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"45-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":56,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":46,\"input\":\"in\",\"data\":{}}]}},\"position\":[-503.1523159886417,-461.5070090725036],\"name\":\"customCode\"},\"46\":{\"id\":46,\"data\":{\"code\":\"  {\\n        \\\"httpRequest\\\": {\\n            \\\"url\\\": \\\"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews/${review_id}\\\",\\n            \\\"method\\\": \\\"GET\\\",\\n            \\\"timeout\\\": 5000,\\n            \\\"insecureSkipVerify1\\\": false,\\n            \\\"parser\\\": \\\"application/json\\\",\\n            \\\"responseCode\\\": \\\"http_response_code\\\",\\n            \\\"path\\\": {\\n                \\\"google_account_id\\\": \\\"${google_account_id}\\\",\\n                \\\"google_location_id\\\": \\\"${google_location_id}\\\",\\n                \\\"review_id\\\": \\\"${destination}\\\"             \\n            },\\n            \\\"headers\\\": {\\n                \\\"Authorization\\\": \\\"${googleToken}\\\"\\n            },\\n             \\\"exportVariables\\\": {\\n                \\\"reviewReply\\\": \\\"reviewReply.comment\\\",\\n                \\\"reviewReplyTime\\\": \\\"reviewReply.updateTime\\\"\\n            }\\n        }\\n    }\",\"extensions\":{\"break\":false,\"tag\":\"46-customCode-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":45,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":47,\"input\":\"in\",\"data\":{}}]}},\"position\":[-498.8720261868656,-320.8481750611424],\"name\":\"customCode\"},\"47\":{\"id\":47,\"data\":{\"data\":\"${profilePhotoUrl}\",\"setVar\":\"profilePhotoUrlNew\",\"fn\":\"replace\",\"args\":[{\"text\":\"s120\"},{\"text\":\"s40\"}],\"extensions\":{\"break\":false,\"tag\":\"47-string-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":46,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":50,\"input\":\"in\",\"data\":{}}]}},\"position\":[-288.95473891981453,-318.3575886639821],\"name\":\"string\"},\"50\":{\"id\":50,\"data\":{\"variable\":\"${starRating}\",\"case\":[{\"text\":\"ONE\"},{\"text\":\"TWO\"},{\"text\":\"THREE\"},{\"text\":\"FOURE\"},{\"text\":\"FIVE\"}],\"extensions\":{\"break\":false,\"tag\":\"50-switch-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":47,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":44,\"input\":\"in\",\"data\":{}}]},\"ONE\":{\"connections\":[{\"node\":51,\"input\":\"in\",\"data\":{}}]},\"TWO\":{\"connections\":[{\"node\":52,\"input\":\"in\",\"data\":{}}]},\"THREE\":{\"connections\":[{\"node\":53,\"input\":\"in\",\"data\":{}}]},\"FOURE\":{\"connections\":[{\"node\":54,\"input\":\"in\",\"data\":{}}]},\"FIVE\":{\"connections\":[{\"node\":55,\"input\":\"in\",\"data\":{}}]}},\"position\":[-113.60691286472827,-279.91871715867984],\"name\":\"switch\"},\"51\":{\"id\":51,\"data\":{\"set\":[{\"key\":\"starRatingNew\",\"value\":\"⭐️★★★★\"}],\"extensions\":{\"break\":false,\"tag\":\"51-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"ONE\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[60.36419875198729,-435.55051304075533],\"name\":\"set\"},\"52\":{\"id\":52,\"data\":{\"set\":[{\"key\":\"starRatingNew\",\"value\":\"⭐️⭐️★★★\"}],\"extensions\":{\"break\":false,\"tag\":\"52-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"TWO\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[267.3257018984179,-381.8225897541506],\"name\":\"set\"},\"53\":{\"id\":53,\"data\":{\"set\":[{\"key\":\"starRatingNew\",\"value\":\"⭐️⭐️⭐️★★\"}],\"extensions\":{\"break\":false,\"tag\":\"53-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"THREE\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[159.54657521896638,-224.48110106584062],\"name\":\"set\"},\"54\":{\"id\":54,\"data\":{\"set\":[{\"key\":\"starRatingNew\",\"value\":\"⭐️⭐️⭐️⭐️★\"}],\"extensions\":{\"break\":false,\"tag\":\"54-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"FOURE\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[340.13695824994954,-134.37675027192617],\"name\":\"set\"},\"55\":{\"id\":55,\"data\":{\"set\":[{\"key\":\"starRatingNew\",\"value\":\"⭐️⭐️⭐️⭐️⭐️\"}],\"extensions\":{\"break\":false,\"tag\":\"55-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":50,\"output\":\"FIVE\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[]}},\"position\":[163.04008031117758,-36.7788950991781],\"name\":\"set\"},\"56\":{\"id\":56,\"data\":{\"set\":[{\"key\":\"google_account_id\",\"value\":\"CHANGE_ME\"},{\"key\":\"google_location_id\",\"value\":\"CHANGE_ME\"}],\"extensions\":{\"break\":false,\"tag\":\"56-set-custom-tag\"}},\"inputs\":{\"in\":{\"connections\":[{\"node\":17,\"output\":\"out\",\"data\":{}}]}},\"outputs\":{\"out\":{\"connections\":[{\"node\":45,\"input\":\"in\",\"data\":{}}]}},\"position\":[-506.4340942089478,-611.5960222023955],\"name\":\"set\"}}}",
    "schema": "[\n    {\n        \"break\": false,\n        \"set\": {\n            \"google_account_id\": \"CHANGE_ME\",\n            \"google_location_id\": \"CHANGE_ME\"\n        },\n        \"tag\": \"56-set-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"cache\": {\n            \"action\": \"get\",\n            \"get\": {\n                \"googleToken\": \"google_review_access_token\"\n            },\n            \"type\": \"redis\"\n        },\n        \"tag\": \"45-customCode-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"httpRequest\": {\n            \"exportVariables\": {\n                \"reviewReply\": \"reviewReply.comment\",\n                \"reviewReplyTime\": \"reviewReply.updateTime\"\n            },\n            \"headers\": {\n                \"Authorization\": \"${googleToken}\"\n            },\n            \"insecureSkipVerify1\": false,\n            \"method\": \"GET\",\n            \"parser\": \"application/json\",\n            \"path\": {\n                \"google_account_id\": \"${google_account_id}\",\n                \"google_location_id\": \"${google_location_id}\",\n                \"review_id\": \"${destination}\"\n            },\n            \"responseCode\": \"http_response_code\",\n            \"timeout\": 5000,\n            \"url\": \"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews/${review_id}\"\n        },\n        \"tag\": \"46-customCode-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"string\": {\n            \"args\": [\n                \"s120\",\n                \"s40\"\n            ],\n            \"data\": \"${profilePhotoUrl}\",\n            \"fn\": \"replace\",\n            \"setVar\": \"profilePhotoUrlNew\"\n        },\n        \"tag\": \"47-string-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"switch\": {\n            \"case\": {\n                \"FIVE\": [\n                    {\n                        \"break\": false,\n                        \"set\": {\n                            \"starRatingNew\": \"⭐️⭐️⭐️⭐️⭐️\"\n                        },\n                        \"tag\": \"55-set-custom-tag\"\n                    }\n                ],\n                \"FOURE\": [\n                    {\n                        \"break\": false,\n                        \"set\": {\n                            \"starRatingNew\": \"⭐️⭐️⭐️⭐️★\"\n                        },\n                        \"tag\": \"54-set-custom-tag\"\n                    }\n                ],\n                \"ONE\": [\n                    {\n                        \"break\": false,\n                        \"set\": {\n                            \"starRatingNew\": \"⭐️★★★★\"\n                        },\n                        \"tag\": \"51-set-custom-tag\"\n                    }\n                ],\n                \"THREE\": [\n                    {\n                        \"break\": false,\n                        \"set\": {\n                            \"starRatingNew\": \"⭐️⭐️⭐️★★\"\n                        },\n                        \"tag\": \"53-set-custom-tag\"\n                    }\n                ],\n                \"TWO\": [\n                    {\n                        \"break\": false,\n                        \"set\": {\n                            \"starRatingNew\": \"⭐️⭐️★★★\"\n                        },\n                        \"tag\": \"52-set-custom-tag\"\n                    }\n                ]\n            },\n            \"variable\": \"${starRating}\"\n        },\n        \"tag\": \"50-switch-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"formComponent\": {\n            \"id\": \"Reviewer\",\n            \"view\": {\n                \"collapsible\": false,\n                \"color\": \"secondary\",\n                \"component\": \"form-text\",\n                \"enableCopying\": false,\n                \"hint\": \"\",\n                \"initialValue\": \"| Photo | Name | Rating |\\n| -------- | ------- | ------- | \\n| ![${member_name}](${profilePhotoUrlNew}) | ${member_name}  | ${starRatingNew}  | \\n\\n\",\n                \"label\": \"\"\n            }\n        },\n        \"tag\": \"44-formText-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"formComponent\": {\n            \"id\": \"Reply\",\n            \"view\": {\n                \"component\": \"rich-text-editor\",\n                \"hint\": \"\",\n                \"initialValue\": \"${reviewReply}\",\n                \"label\": \"\",\n                \"output\": \"text\"\n            }\n        },\n        \"tag\": \"39-formRichTextEditor-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"generateForm\": {\n            \"actions\": [\n                {\n                    \"id\": \"id\",\n                    \"view\": {\n                        \"color\": \"primary\",\n                        \"text\": \"Send\"\n                    }\n                }\n            ],\n            \"body\": [\n                \"Reviewer\",\n                \"Reply\"\n            ],\n            \"id\": \"ReplyForm\",\n            \"title\": \"Google Review\"\n        },\n        \"tag\": \"40-generateForm-custom-tag\"\n    },\n    {\n        \"break\": false,\n        \"if\": {\n            \"expression\": \"${Reply}\",\n            \"then\": [\n                {\n                    \"break\": false,\n                    \"httpRequest\": {\n                        \"data\": {\n                            \"comment\": \"${Reply}\"\n                        },\n                        \"headers\": {\n                            \"Authorization\": \"${googleToken}\"\n                        },\n                        \"insecureSkipVerify1\": false,\n                        \"method\": \"PUT\",\n                        \"parser\": \"application/json\",\n                        \"path\": {\n                            \"google_account_id\": \"${google_account_id}\",\n                            \"google_location_id\": \"${google_location_id}\",\n                            \"review_id\": \"${destination}\"\n                        },\n                        \"responseCode\": \"http_response_code\",\n                        \"timeout\": 5000,\n                        \"url\": \"https://mybusiness.googleapis.com/v4/accounts/${google_account_id}/locations/${google_location_id}/reviews/${review_id}\"\n                    },\n                    \"tag\": \"42-customCode-custom-tag\"\n                }\n            ]\n        },\n        \"tag\": \"41-if-custom-tag\"\n    },\n    {\n        \"attemptResult\": {\n            \"description\": \"\",\n            \"readyAt\": \"\",\n            \"status\": \"success\",\n            \"stickyDisplay\": false\n        },\n        \"break\": true,\n        \"tag\": \"43-attemptResult-custom-tag\"\n    }\n]",
    "id": "1441",
    "createdAt": "1698831472095",
    "createdBy": {
        "id": "130",
        "name": "Євген Волошин"
    },
    "updatedAt": "1698831961809",
    "updatedBy": {
        "id": "130",
        "name": "Євген Волошин"
    },
    "name": "Google reviews: Reply to a review"
}